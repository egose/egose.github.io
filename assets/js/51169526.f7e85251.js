"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3454],{9886:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});var c=i(5893),n=i(1151);i(4866),i(5162),i(9286);const l={sidebar_position:0},o="List",r={id:"egose-acl/crud-lifecycle/list",title:"List",description:"List operation executes hook methods in the following sequence:",source:"@site/docs/egose-acl/crud-lifecycle/list.mdx",sourceDirName:"egose-acl/crud-lifecycle",slug:"/egose-acl/crud-lifecycle/list",permalink:"/docs/egose-acl/crud-lifecycle/list",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:0,frontMatter:{sidebar_position:0},sidebar:"aclSidebar",previous:{title:"Workflow Lifecycle",permalink:"/docs/egose-acl/crud-lifecycle/"},next:{title:"Read",permalink:"/docs/egose-acl/crud-lifecycle/read"}},t={},d=[{value:"Configuration Example",id:"configuration-example",level:3}];function a(e){const s={code:"code",h1:"h1",h3:"h3",p:"p",pre:"pre",...(0,n.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h1,{id:"list",children:"List"}),"\n","\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.code,{children:"List"})," operation executes hook methods in the following sequence:"]}),"\n",(0,c.jsxs)("table",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Hook"}),(0,c.jsx)("th",{children:"Parameters"}),(0,c.jsx)("th",{children:"Description"})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("code",{children:"docPermissions"})}),(0,c.jsx)("td",{children:(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:"Mongoose document / plain document object"}),(0,c.jsx)("li",{children:"global permissions"})]})}),(0,c.jsx)("td",{children:(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:["skips if option ",(0,c.jsx)("code",{children:"includePermissions"})," set to ",(0,c.jsx)("code",{children:"false"})]}),(0,c.jsx)("li",{children:"called after Mongoose execute the query"}),(0,c.jsx)("li",{children:"runs on each document"})]})})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("code",{children:"decorate"})}),(0,c.jsx)("td",{children:(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:"plain document object"}),(0,c.jsx)("li",{children:"global permissions"})]})}),(0,c.jsx)("td",{children:(0,c.jsx)("ul",{children:(0,c.jsx)("li",{children:"runs on each document object"})})})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("code",{children:"decorateAll"})}),(0,c.jsx)("td",{children:(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:"plain document objects"}),(0,c.jsx)("li",{children:"global permissions"})]})}),(0,c.jsx)("td",{children:(0,c.jsx)("ul",{children:(0,c.jsx)("li",{children:"runs on set of document objects"})})})]})]}),"\n",(0,c.jsx)(s.h3,{id:"configuration-example",children:"Configuration Example"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-ts",children:"modelRouter.docPermissions('list', function (docOrObject, globalPermissions) {\n  const isMe = String(docOrObject._id) === String(this.user._id);\n\n  return {\n    canEdit: globalPermissions.isAdmin || isMe,\n  };\n});\n\nmodelRouter.decorate('list', function (docObject, globalPermissions) {\n  docObject.decoratedBy = 'egose';\n  return docObject;\n});\n\nmodelRouter.decorateAll(function (docObjects, globalPermissions) {\n  const filtered = docObjects.filter((doc) => doc.public);\n  return filtered;\n});\n"})})]})}function h(e={}){const{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);